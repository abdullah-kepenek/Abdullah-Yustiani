<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Abdullah & Yustiani Indah ‚Äì Miss You Page</title>
  <meta name="description" content="Abdullah and Yustiani Indah's special miss you page with Dhikr, Quran, Hadith and countdown.">
  <meta name="robots" content="index, follow">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #fecfef);
      text-align: center;
      padding-top: 40px;
      color: #ffffff;
      margin: 0;
    }
    h1 {
      font-size: 42px;
      margin-bottom: 5px;
    }
    h2 {
      font-size: 24px;
      margin-top: 0;
    }
    .section {
      margin-top: 25px;
    }
    #bar-container {
      width: 80%;
      max-width: 450px;
      margin: 20px auto 10px auto;
      background: rgba(255,255,255,0.3);
      border-radius: 25px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    }
    #bar {
      height: 45px;
      width: 0%;
      background: #ff0055;
      transition: width 2s;
    }
    .percent {
      margin-top: 10px;
      font-size: 30px;
      font-weight: bold;
    }
    .note {
      margin-top: 8px;
      font-size: 16px;
      opacity: 0.95;
    }
    .card {
      background: rgba(255,255,255,0.2);
      margin: 15px auto;
      padding: 15px 20px;
      border-radius: 20px;
      width: 90%;
      max-width: 520px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.2);
      text-align: left;
    }
    .card h3 {
      margin-top: 0;
      margin-bottom: 8px;
      text-align: left;
    }
    textarea, input, button {
      margin-top: 8px;
    }
    textarea, input[type="text"] {
      width: 100%;
      max-width: 480px;
      padding: 8px 10px;
      border-radius: 8px;
      border: none;
      outline: none;
      resize: vertical;
    }
    button {
      padding: 8px 16px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      opacity: 0.9;
    }
    #messageList {
      list-style: none;
      padding-left: 0;
      margin-top: 10px;
    }
    #messageList li {
      margin-bottom: 6px;
      font-size: 14px;
    }
  </style>
</head>

<body>

  <h1>Abdullah ‚ù§Ô∏è Yustiani Indah</h1>
  <h2>Our Miss You Page</h2>

  <div id="bar-container">
    <div id="bar"></div>
  </div>
  <div class="percent" id="percentText">0%</div>

  <div class="note">Today our miss-you level is this high ü•π</div>

  <div class="section">
    <h2>Countdown to 20 December</h2>
    <div id="countdownText" style="
      background: rgba(0,0,0,0.2);
      padding: 10px 20px;
      border-radius: 20px;
      display: inline-block;">
      Calculating days...
    </div>
  </div>

  <div class="section">
    <div class="card">
      <h3>üíå Today‚Äôs Messages</h3>

      <b>Abdullah‚Äôs message:</b>
      <textarea id="msgAbdullah" rows="3"></textarea>
      <button id="sendAbd">Send</button>

      <hr>

      <b>Yustiani‚Äôs message:</b>
      <textarea id="msgYui" rows="3"></textarea>
      <button id="sendYui">Send</button>

      <hr>

      <h3>üì¨ Messages Today</h3>
      <ul id="messageList"></ul>
    </div>
  </div>

  <footer style="margin-top:40px; opacity:0.7;">
    Made with ‚ù§Ô∏è by Abdullah.
  </footer>

  <!-- FIREBASE + JS -->
  <script type="module">
    // -----------------------------------------------------
    // 1) FIREBASE SDK IMPORTLARI
    // -----------------------------------------------------
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getFirestore,
      collection,
      addDoc,
      getDocs,
      query,
      where,
      orderBy,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    // -----------------------------------------------------
    // 2) üî• BURAYA KENDƒ∞ firebaseConfig VERƒ∞Nƒ∞ YAPI≈ûTIRACAKSIN üî•
    // -----------------------------------------------------
    const firebaseConfig = {
  apiKey: "AIzaSyB-9cGEGIDxdRSbCmKLyNNB3c1pTeCXzIw",
  authDomain: "abdullah-yustiani-page.firebaseapp.com",
  projectId: "abdullah-yustiani-page",
  storageBucket: "abdullah-yustiani-page.appspot.com",
  messagingSenderId: "617857114066",
  appId: "1:617857114066:web:ec215e004c94fbd3c4720b"
    };

    // -----------------------------------------------------
    // 3) FIREBASE BA≈ûLAT
    // -----------------------------------------------------
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // -----------------------------------------------------
    // 4) MESAJ G√ñNDERME
    // -----------------------------------------------------
    const sendMessage = async (author, text) => {
      await addDoc(collection(db, "messages"), {
        author,
        text,
        date: new Date().toISOString().slice(0, 10),
        createdAt: serverTimestamp()
      });
      loadMessages();
    };

    // -----------------------------------------------------
    // 5) BUG√úNK√ú MESAJLARI √áEKME
    // -----------------------------------------------------
    const loadMessages = async () => {
      const today = new Date().toISOString().slice(0, 10);

      const q = query(
        collection(db, "messages"),
        where("date", "==", today),
        orderBy("createdAt", "asc")
      );

      const snap = await getDocs(q);
      const list = document.getElementById("messageList");
      list.innerHTML = "";

      snap.forEach(doc => {
        const d = doc.data();
        const li = document.createElement("li");
        li.textContent = `${d.author}: ${d.text}`;
        list.appendChild(li);
      });
    };

    // -----------------------------------------------------
    // 6) BUTTON EVENTLERƒ∞
    // -----------------------------------------------------
    document.getElementById("sendAbd").onclick = () => {
      const text = document.getElementById("msgAbdullah").value.trim();
      if (text) sendMessage("Abdullah", text);
      document.getElementById("msgAbdullah").value = "";
    };

    document.getElementById("sendYui").onclick = () => {
      const text = document.getElementById("msgYui").value.trim();
      if (text) sendMessage("Yustiani", text);
      document.getElementById("msgYui").value = "";
    };

    // -----------------------------------------------------
    // 7) SAYFA A√áILINCA MESAJLARI Y√úKLE
    // -----------------------------------------------------
    loadMessages();

    // -----------------------------------------------------
    // 8) COUNTDOWN
    // -------------------------------
